<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<!-- Created using eXe: http://exelearning.org -->
<head>
<link rel="stylesheet" type="text/css" href="base.css" /><link rel="stylesheet" type="text/css" href="content.css" /><link rel="stylesheet" type="text/css" href="nav.css" /><title>6.2 - Restauración del DUMP </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
<script type="text/javascript" src="common.js"></script>
</head>
<body>
<div id="content">
<div id="emptyHeader"></div><div id="siteNav">
<ul>
<li><a href="index.html" class="daddy main-node">Administración de PostgreSQL</a></li><li><a href="1__instalacin.html" class="no-ch">1 - Instalación</a></li>
<li><a href="nota_previa.html" class="no-ch">Nota Previa</a></li>
<li><a href="2_arranque_y_parada_del_sistema.html" class="no-ch">2. Arranque y parada del sistema</a></li>
<li><a href="3__ficheros_de_configuracin.html" class="no-ch">3 - Ficheros de configuración</a></li>
<li><a href="4__gestin_de_usuarios_y_privilegios.html" class="daddy">4 - Gestión de usuarios y privilegios</a><ul class="other-section">
<li><a href="41__gestin_de_roles_utilizacin_como_usuarios.html" class="no-ch">4.1 - Gestión de roles: utilización como usuarios</a></li>
<li><a href="42__gestin_de_roles_utilizacin_como_grupos.html" class="no-ch">4.2 - Gestión de roles: utilización como grupos</a></li>
<li><a href="43__permisos.html" class="no-ch">4.3 - Permisos</a></li>
<li><a href="44__roles_y_miembros.html" class="no-ch">4.4 - Roles y miembros</a></li>
<li><a href="45__autenticacin_de_usuarios.html" class="no-ch">4.5 - Autenticación de usuarios</a></li>
</ul>
</li>
<li><a href="5__gestin_de_bases_de_datos.html" class="daddy">5 - Gestión de Bases de Datos</a><ul class="other-section">
<li><a href="51__bases_de_datos_creacin_modificacin_y_eliminacin.html" class="no-ch">5.1 - Bases de Datos: Creación, Modificación y Eliminación</a></li>
<li><a href="52__esquemas.html" class="no-ch">5.2 - Esquemas</a></li>
<li><a href="53__tablespaces.html" class="no-ch">5.3 - Tablespaces</a></li>
<li><a href="54_lugares_alternativos.html" class="no-ch">5.4 Lugares alternativos</a></li>
</ul>
</li>
<li class="current-page-parent"><a href="6_copia_de_seguridad_y_restauracin.html" class="current-page-parent daddy">6- Copia de seguridad y restauración</a><ul>
<li><a href="61__pg_dump.html" class="no-ch">6.1 - PG_DUMP</a></li>
<li id="active"><a href="62__restauracin_del_dump.html" class="active no-ch">6.2 - Restauración del DUMP</a></li>
<li><a href="63__backup_desde_pgadmin.html" class="no-ch">6.3 - Backup desde PgAdmin</a></li>
<li><a href="64__backup_por_copia_de_ficheros.html" class="no-ch">6.4 - Backup por copia de ficheros</a></li>
</ul>
</div>
<div id='topPagination'><div class="pagination noprt"><a href="61__pg_dump.html" class="prev"><span>&laquo; </span>Anterior</a> | <a href="63__backup_desde_pgadmin.html" class="next"> Siguiente<span> &raquo;</span></a></div>
</div><div id="main">
<div id="nodeDecoration"><h1 id="nodeTitle">6.2 - Restauración del DUMP</h1></div>
<div class="FreeTextIdevice" id="id18">
<div class="iDevice emphasis0">
<div id="ta18_1" class="block" style="display:block;position:relative"><p>
&nbsp;
</p>
<p>
&nbsp;
</p>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">Si el fichero de salida del </span><b><i><span>dump </span></i></b><span style="font-family: Arial; color: black">(que ahora llamaremos de entrada) no tenía
ningún formado (no hemos utilizado la opción -F) le ejecutaremos en el </span><b><i><span>psql</span></i></b><span style="font-family: Arial; color: black">,
ya que son comandos SQL. Lo podemos hacer de las dos siguientes maneras:<o:p></o:p></span>
</p>
<div style="border: 1pt solid windowtext; padding: 1pt 4pt; margin-left: 2cm; margin-right: 0cm">
<p class="MsoBodyText" style="border: medium none ; padding: 0cm">
<b><i><span style="font-family: 'Courier New'; color: mediumblue">psql nombre_bd &lt;
fichero_entrada<o:p></o:p></span></i></b>
</p>
</div>
<p class="MsoBodyText">
<b><span style="font-family: 'Courier New'; color: mediumblue"><o:p> </o:p></span></b>
</p>
<div style="border: 1pt solid windowtext; padding: 1pt 4pt; margin-left: 2cm; margin-right: 0cm">
<p class="MsoBodyText" style="border: medium none ; padding: 0cm">
<b><i><span style="font-family: 'Courier New'; color: mediumblue">psql -f fichero_entrada
nombre_bd<o:p></o:p></span></i></b>
</p>
</div>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">Como siempre, si el fichero no está en el directorio activo
deberemos poner la ruta. Incluso una vez hemos entrado en la base de datos,
podremos hacer:<o:p></o:p></span>
</p>
<div style="border: 1pt solid windowtext; padding: 1pt 4pt; margin-left: 2cm; margin-right: 0cm">
<p class="MsoBodyText" style="border: medium none ; padding: 0cm">
<b><i><span style="font-family: 'Courier New'; color: mediumblue">\i fichero_entrada<o:p></o:p></span></i></b>
</p>
</div>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">habrà una restricción lógica, pero importante: tanto la Base de
Datos como el usuario deben existir (no los crea esta restauración)<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">Para restaurar todas las B.D., ejecutaremos desde </span><b><i><span>posgres</span></i></b><span style="font-family: Arial; color: black">,
y mejor accediendo a </span><b><i><span>template1</span></i></b><span style="font-family: Arial; color: black">.<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">Puestos a hacer virguerias, incluso podemos transvasar la
información de una B.D. a otra:<o:p></o:p></span>
</p>
<div style="border: 1pt solid windowtext; padding: 1pt 4pt; margin-left: 2cm; margin-right: 0cm">
<p class="MsoBodyText" style="border: medium none ; padding: 0cm">
<b><i><span style="font-family: 'Courier New'; color: mediumblue"> pg_dump bd1 |
psql bd2<o:p></o:p></span></i></b>
</p>
</div>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">que incluso puede estar en otro lugar<o:p></o:p></span>
</p>
<div style="border: 1pt solid windowtext; padding: 1pt 4pt; margin-left: 2cm; margin-right: 0cm">
<p class="MsoBodyText" style="border: medium none ; padding: 0cm">
<b><i><span style="font-family: 'Courier New'; color: mediumblue" lang="EN-GB">pg_dump bd1 | psql -h HOST bd1<o:p></o:p></span></i></b>
</p>
</div>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">En cambio, si el fichero de salida tenía algún formato, porque
hemos utilizado la opción </span><b><span>-Ft </span></b><span style="font-family: Arial; color: black">o </span><b><span>-Fc</span></b><span style="font-family: Arial; color: black">, habremos de utilizar el programa </span><b><i><span>pg_rerestore</span></i></b><span style="font-family: Arial; color: black">,
con el que se pueden especificar más cosas:<o:p></o:p></span>
</p>
<div style="border: 1pt solid windowtext; padding: 1pt 4pt; margin-left: 2cm; margin-right: 0cm">
<p class="MsoBodyText" style="border: medium none ; padding: 0cm">
<b><i><span style="font-family: 'Courier New'; color: mediumblue">pg_rerestore [
opciones ] nombre_fichero<o:p></o:p></span></i></b>
</p>
</div>
<p class="MsoBodyText">
<span style="font-family: Arial; color: black">Y en las opciones, entre otros, podremos poner:<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<b><span style="font-size: 11pt; color: black">-a <span>                    </span></span></b><span style="font-size: 11pt; color: black">nada más</span><span style="font-size: 11pt; font-family: Arial; color: black"> restaura las datos<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<b><span style="font-size: 11pt; color: black">-s <span>                    </span></span></b><span style="font-size: 11pt; color: black">nada más</span><span style="font-size: 11pt; font-family: Arial; color: black"> restaura la estructura<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<b><span style="font-size: 11pt; color: black">-c <span>                    </span></span></b><span style="font-size: 11pt; color: black">borra</span><span style="font-size: 11pt; font-family: Arial; color: black"> los objetos antes de rellenarlos<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<b><span style="font-size: 11pt; color: black">-C <span>                   </span></span></b><span style="font-size: 11pt; font-family: Arial; color: black">crea la B.D. antes de restaurar en ella<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<b><span style="font-size: 11pt; color: black">-d <i>nombre_bd <span> </span></i></span></b><span style="font-size: 11pt; color: black">se</span><span style="font-size: 11pt; font-family: Arial; color: black"> conecta a la B.D. y restaura directamente en
ella<o:p></o:p></span>
</p>
<p class="MsoBodyText" style="margin-left: 70.9pt; text-indent: -70.9pt">
<b><span style="font-size: 11pt; color: black">-F <i>format <span>        </span></i></span></b><span style="font-size: 11pt; font-family: Arial; color: black">indica el formato del fichero de entrada, aunque no hace falta
para que lo detecta<o:p></o:p></span>
</p>
<p class="MsoBodyText" style="margin-left: 70.9pt">
<span style="font-size: 11pt; font-family: Arial; color: black">automáticamente<o:p></o:p></span>
</p>
<p class="MsoBodyText">
<b><span style="font-size: 11pt; color: black">-t <i>nombre <span>       </span></i></span></b><span style="font-size: 11pt; font-family: Arial; color: black">restaura solo la tabla especificada<o:p></o:p></span>
</p>
<p class="MsoBodyText" style="margin-right: -14.3pt">
<span style="font-family: Arial; color: black">Aparte estarán las
habituales opciones de conexión: </span><b><span>-h </span></b><span style="font-family: Arial; color: black">(</span><i><span>HOST</span></i><span style="font-family: Arial; color: black">), </span><b><span>-p </span></b><span style="font-family: Arial; color: black">(</span><i><span>puerto</span></i><span style="font-family: Arial; color: black">), </span><b><span>-U </span></b><span style="font-family: Arial; color: black">(</span><i><span>usuario</span></i><span style="font-family: Arial; color: black">) y </span><b><span>-W<o:p></o:p></span></b>
</p>
<span style="font-size: 12pt; font-family: Arial; color: black"></span>
<p>

</p>
</div></div>
</div>
<div id='bottomPagination'><div class="pagination noprt"><a href="61__pg_dump.html" class="prev"><span>&laquo; </span>Anterior</a> | <a href="63__backup_desde_pgadmin.html" class="next"> Siguiente<span> &raquo;</span></a></div>
</div></div>
</div>
</body></html>
